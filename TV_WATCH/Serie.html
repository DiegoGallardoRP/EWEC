<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles de Película</title>
    <style>
        body{
            background-color: red;
        }
        .fotoSerie {
            width: 150px;
            height: 150px;
        }

        .fotoRecomendado {
            width: 100px;
            height: 100px;
        }
        .cruz{
            width: 150px;
            height: 150px;
        }
    </style>
    <script>
        function cargarSerie() {
            let usuarioGuardado = sessionStorage.getItem("usuarioActual");
            usuario = JSON.parse(usuarioGuardado);
            const detalleSerie = JSON.parse(sessionStorage.getItem("detalleSerie"));
            const listaSeries = JSON.parse(sessionStorage.getItem("listaSeries"));
            if (detalleSerie) {
                document.getElementById("tituloSerie").textContent = detalleSerie.titulo;
                document.getElementById("directorSerie").textContent = detalleSerie.director;
                document.getElementById("categoriaSerie").textContent = detalleSerie.categoria;
                document.getElementById("fotoSerie").src = `./imagenes/${detalleSerie.foto}`;
                document.getElementById("fotoSerie").addEventListener("click", () => { location.href = detalleSerie.link; });
                document.getElementById("cruz").addEventListener("click", ()=>{anadirAListaSeries(detalleSerie)});
                let carruselSerie = '';
                carruselSerie += `<ul><li>`;
                listaSeries.forEach(serie => {
                    if (serie.categoria == detalleSerie.categoria && serie.titulo != detalleSerie.titulo) {
                        carruselSerie += `<img class="fotoRecomendado" src="./imagenes/${serie.foto}" onclick="mostrarSerieDetalle('${serie.titulo}')">`;
                    }
                })
                carruselPeli += `</li></ul>`;
                document.body.insertAdjacentHTML("beforeend", carruselSerie);
            } else {
                document.body.innerHTML = "<p>No se encontró la información de la serie.</p>";
            }
        }
        function anadirAListaSeries(serie){
            let nombreUsuario=usuario.nombre;
            let nombreSerie=serie.titulo;
            var fecha = new Date();
            fecha.setTime(fecha.getTime()+(7*24*60*60*1000));
            document.cookie += nombreUsuario + '=' + nombreSerie + ';expires=' + fecha.toUTCString();
            alert(document.cookie);
        }
        function mostrarPeliDetalle(titulo) {
            const listaSeries = JSON.parse(sessionStorage.getItem("listaPelis"));
            const serieSeleccionada = listaSeries.find(serie => serie.titulo == titulo);
            if (serieSeleccionada) {
                sessionStorage.setItem("detalleSerie", JSON.stringify(serieSeleccionada));
                location.href = "Serie.html";
            }
        }
        onload = () => {
            cargarSerie();
        }
    </script>
</head>

<body>
    <h1 id="tituloSerie"></h1>
    <p>Director: <span id="directorSerie"></span></p>
    <p>Categoría: <span id="categoriaSerie"></span></p>
    <img id="fotoSerie" class="fotoSerie" src="">
    <img id="cruz" class="cruz" src="imagenes/cruz.png">

</body>

</html>